$('#flash_messages').html('<%=j render partial: 'layouts/flash', locals: {flash: flash}%>');
<%if @is_reply%>
    $("#rankingpanelcontainer<%=@proposal_comment.contribute.id%>").html('<%=j render partial: 'proposal_comments/ranking_panel', locals: {comment: @proposal_comment.contribute}%>');
    $("#<%=@proposal_comment.contribute.id%>_new_replies").append('<%=j render partial: 'proposals/reply', locals: {reply: @proposal_comment, hide: false}%>');
    $('#<%=@proposal_comment.contribute.id%>_reply_text_area').val('');
    $('.deleteReplyLink').unbind('click');
    $('.deleteReplyLink').bind('click', function (event) {
        hideAndDeleteReply(event, $(this).data('id'));
    });
    $('.reply_textarea').attr('placeholder', '<%=t('pages.proposals.show.reply_placeholder')%>');

    <% publish_to  proposal_path(@proposal) do %>
    if (Airesis.id != <%=current_user.id%>) {
        $("#<%=@proposal_comment.contribute.id%>_new_replies").append('<%=j render partial: 'proposals/reply_others', locals: {reply: @proposal_comment, hide: false}%>');
    }
    <% end rescue nil%>
<%else%>
    $("#proposalCommentsContainer").html('<%=j render partial: 'proposals/comments'%>');
    $("#proposalNewComment").html('<%=j render 'proposal_comments/proposal_comment', {proposal_comment: @proposal.comments.new}%>');

    <% publish_to  proposal_path(@proposal) do %>
    if (Airesis.id != <%=current_user.id%>) {
        toastr.info('<%=j "E' appena stato inserito un nuovo contributo"%>');
        $("#proposalCommentsContainer").prepend('<%=j render :partial => 'proposals/comment_others', :locals => {:comment => @proposal_comment} %>');
        hide_vote_controls();
    }
    <% end rescue nil%>
<%end%>

disegnaBottoni();
resetCounter();
checkScroll();
$('.reply_textarea').elastic();
