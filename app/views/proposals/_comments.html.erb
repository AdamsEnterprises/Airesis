<div class="blogComments" id="proposalComments">
	<% @proposal_comments.each do |comment| %>
		<%= render :partial => 'proposals/comment', :locals => {:comment => comment} %>
	<% end %>
</div>

<script type="text/javascript">


    $(function() {
		hide_vote_controls();


        $('.proposalComment[data-collapsed=true]').show(600);

        $('.deleteCommentLink').unbind('click');
        $('.deleteCommentLink').bind('click',function(event) {
            hiding(event,$(this).data('id'));
        });

        $('.deleteReplyLink').unbind('click');
        $('.deleteReplyLink').bind('click',function(event) {
            hideAndDeleteReply(event,$(this).data('id'));
        });


        $('.reply_textarea').each(function () {
            if ($(this).attr('data-initialized') != 1) {
                $(this).textntags({
                    triggers: {'@': {uniqueTags: false}},
                    onDataRequest: function (mode, query, triggerChar, callback) {
                        var data = nicknames;

                        query = query.toLowerCase();
                        var found = _.filter(data, function (item) {
                            return item.name.toLowerCase().indexOf(query) > -1;
                        });

                        callback.call(this, found);
                    }
                });
                $(this).attr('data-initialized', 1);
            }
        });
	});
</script>
