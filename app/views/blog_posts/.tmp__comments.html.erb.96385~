<% javascript 'endless_page' %>
<div class="blogComments" id="blogPostComments">
	


	<% @blog_comments.each do |comment| %>
		<%= render :partial => 'blog_posts/comment', :locals => {:comment => comment} %>
	<% end %>

</div>

<script>
$(document).ready(function() {		
    ajaxifyPagination();
});


function getParameterByName(path, name) {
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(path);
  if( results == null )
    return "";
  else
    return results[1];
}


function ajaxifyPagination() {
	//alert(document.URL +"\n" + $(".pagination a").attr("href"));
    $(".pagination a").click(function() {
		if (pageURL) {
			page = getParameterByName(this.href, 'page');
			my_pagination_url = pageURL + "?page=" + page;
		}
		else {
			my_pagination_url = $(this).attr("href");
		} 				
        $.ajax({
          type: "GET",
          url: my_pagination_url,
          dataType: "script"
        });
        return false;
    });
}
</script>



