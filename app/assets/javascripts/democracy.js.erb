$(function() {
	disegnaBottoni();
	
});
function disegnaBottoni() {
	$('.buttonStyle').button();
	$('.fullEditButton').button({icons : {primary : "ui-icon-pencil"}});
	$('.editButton').button({icons : {primary : "ui-icon-pencil"},text : false});
	$('.deleteButton').button({icons : {primary : "ui-icon-circle-close"},text : false});
	$('.newButton').button({icons : {primary : "ui-icon-plusthick"}});
}

$.datepicker.setDefaults( $.datepicker.regional[ "it" ] );

function disegnaDatePicker() {
	$("#event_endtime").datetimepicker({
        dateFormat : "dd/mm/yy",
        buttonImageOnly : true,
        buttonImage : "<%= asset_path('iconCalendar.png') %>",
        showOn : "both",
        changeMonth : false,
        changeYear : false,
        yearRange : "c:c+10",
        minDate : -2,
        maxDate: "+10Y",
        duration: "",  
        showTime: true,  
        constrainInput: true,
        stepMinute: 15,  
        stepHour: 1,  
        altTimeField: "alt",  
        time24h: true,
        onClose: function(date) {
        	startTime = $("#event_starttime").datetimepicker("getDate");
        	endTime = $("#event_endtime").datetimepicker("getDate");
        	startDate = new Date(startTime);
        	endDate = new Date(endTime);
	        if (!(endDate.getTime() > startDate.getTime())) { 				
	 			$("#event_starttime").datetimepicker("setDate",endTime);
 			}
 			var diff =  Math.floor(( endDate - new Date()) / 86400000);
 			$("#event_starttime").datetimepicker("option","maxDate",diff+1); 			
        }
 	  });   
		
	$('#event_starttime').datetimepicker({
        dateFormat : "dd/mm/yy",
        buttonImageOnly : true,
        buttonImage : "<%= asset_path('iconCalendar.png') %>",
        showOn : "both",
        changeMonth : false,
        changeYear : false,
        yearRange : "c:c+10",
        minDate : -2,
        maxDate: "+10Y",
        duration: "",  
        showTime: true,  
        constrainInput: true,
        stepMinute: 15,  
        stepHour: 1,  
        altTimeField: "alt",  
        time24h: true,
        onClose: function(date) {
        	startTime = $("#event_starttime").datetimepicker("getDate");
        	endTime = $("#event_endtime").datetimepicker("getDate");
        	startDate = new Date(startTime);
        	endDate = new Date(endTime);
	        if (!(endDate.getTime() > startDate.getTime())) { 				
	 			$("#event_endtime").datetimepicker("setDate",startTime);
 			} 			
 			var diff =  Math.floor(( startDate - new Date()) / 86400000);
 			$("#event_endtime").datetimepicker("option","minDate",diff);
        }
     });
 }

function deleteMe(el) {
	$(el).remove();
}

